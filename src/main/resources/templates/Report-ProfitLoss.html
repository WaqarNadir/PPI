<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<div th:replace="template:: head"></div>
<body class="hold-transition skin-blue sidebar-mini">
	<script>
		function getReport(value) {
			if (value == '0') {
				return;
			}
			if (value == '3') {
				$("#customDates").show();
			} else {
				$("#customDates").hide();
				$("#ProfitLossForm").submit();
			}

		}

		function printDiv() {

			var divToPrint = document.getElementById('printDiv');

			var newWin = window.open('', 'Print-Window');

			newWin.document.open();

			var head = '<style type="text/css" media="print" />'
					+ '<style type="text/css" media="screen" />'
					+ '<link rel="stylesheet" th:href="@{/dist/css/printCss.css}" />';
			newWin.document.write('<html>' + head
					+ '<body onload="window.print()">' + divToPrint.innerHTML
					+ '</body></html>');

			newWin.document.close();

			setTimeout(function() {
				newWin.close();
			}, 10);

		};
	</script>

	<div th:replace="template:: wrapper"></div>
	<div class="content-wrapper">
		<div class="content">
			<div class="box box-danger center" id="printDiv">
				<div class="box-header with-border text-center">

					<div class="col-md-11">
						<h2>Profit Loss Report</h2>
						<p>
							<strong th:text="${label}"></strong>
						</p>
					</div>
					<div class="col-md-1">
						<button onclick="printDiv()" type="submit"
							class="btn-lg btn-primary pull-right no-print">Print</button>
					</div>
				</div>

				<div>
					<form th:action="@{/Reports/DateWiseProfitLoss}" method="post"
						id="ProfitLossForm">
						<div class="col-sm-3 pull-right">
							<select class="form-control no-print"
								onchange="getReport(this.value)" th:selected="${selectedValue}"
								name="selectValue">
								<option value="0"
									th:selected="${selectedValue} == null ? 'selected'">Please Select</option>
								<option value="1"
									th:selected="${selectedValue} == '1' ? 'selected'">This Month</option>
								<option value="2"
									th:selected="${selectedValue} == '2' ? 'selected'">This Year</option>
								<option value="3"
									th:selected="${selectedValue} == '3' ? 'selected'">Custom Dates</option>
							</select>

						</div>
						<div class="col-sm-3 " id="customDates"
							th:hidden="${selectedValue} != '3' ? hidden">
							<label>Start Date : </label> <input type="date"
								class="form-control" placeholder="Enter Start Date"
								name="startDate" required="required" /> <label>End Date
								:</label> <input class="form-control" type="date" name="endDate"
								required="required" placeholder="Enter End Date" />
							<button type="submit" class="btn-primary">Search</button>

						</div>
					</form>
					<table class="table stripped table-col-width-fixed table-print">
						<tr>
							<td class="text-center" colspan="3">
								<h3>Income</h3>
							</td>
						</tr>

						<tr th:each="income : ${incomeList}">

							<td th:text="${income.key}"></td>
							<td></td>
							<td th:text="${income.value}"></td>
							<td></td>
						</tr>
						<tr>
							<td></td>
						</tr>
						<tr>
							<td></td>
							<td><strong>Total Income</strong></td>

							<td class="custom-td" th:text="${incomeSum}"></td>
							<td></td>
						</tr>
						<tr>
							<td class="text-center" colspan="3">
								<h3>Expense</h3>
							</td>
						</tr>

						<tr th:each="expense : ${expenseList}">
							<td th:text="${expense.key}"></td>
							<td></td>
							<td th:text="${expense.value}"></td>
							<td></td>
						</tr>
						<tr>
							<td></td>
						</tr>
						<tr>
							<td></td>
							<td><strong>Total Expense</strong></td>

							<td class="custom-td" th:text="${expenseSum}"></td>
							<td></td>
						</tr>
						<tr>
							<td></td>
						</tr>
						<tr>
							<td><strong>Total Profit</strong></td>
							<td></td>
							<td class="custom-td" th:text="${incomeSum} - ${expenseSum}"></td>
							<td></td>
						</tr>

						<tr>
							<td colspan="2"><h3>Net Equity</h3></td>
							<td class="custom-td"><h3 th:text="${netEquity}"></h3></td>
						</tr>
					</table>
				</div>


			</div>
		</div>

	</div>

	<div th:replace="template:: footer"></div>
</body>
</html>
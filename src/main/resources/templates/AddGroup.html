<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<div th:replace="template:: head"></div>
<body class="hold-transition skin-blue sidebar-mini">

	<script>
		function enable() {
			$("#childRef").prop("disabled", (!$("#childRef").attr("disabled")));
		}
		function updateParent(value) {
			$("#parent").val(value);

		}

		function getSubType(value) {
			if (value == 999)
				return;
			fieldName = "#childRef";
			$(fieldName).empty();

			getRefNo(value);

			$.ajax({
				url : "/getSubType",
				contentType : "application/json; charset=utf-8",
				data : value,
				type : "POST",
				success : function(prodType) {
					$(fieldName).append(
							$("<option></option>").attr("value", 999).text(
									"Please Select"));

					$.each(prodType, function(key, value, dropDown) {
						$(fieldName).append(
								$("<option></option>").attr("value", value[0])
										.text(value[1]));

					});

				},
				error : function(xhr, status, error) {
					alert("ERROR:" + xhr.responseText);
					console.log("ERROR:" + xhr.responseText);
				}
			});
		}

		function getRefNo(value) {
			if (value == 999)
				return;
			updateParent(value);
			$.ajax({
				url : "/getRefNo",
				contentType : "application/json; charset=utf-8",
				data : value,
				type : "POST",
				success : function(result) {
					$("#RefNo").val(result);
				},
				error : function(xhr, status, error) {
					alert("ERROR:" + xhr.responseText);
					console.log("ERROR:" + xhr.responseText);
				}
			});
		}
	</script>

	<div th:replace="template:: wrapper"></div>
	<div class="content-wrapper">
		<div class="content">
			<div class="box box-danger center">
				<div class="box-header with-border text-center">
					<h2 class="box-title">Add Chart of Account</h2>
				</div>
				<form class="form-horizontal" th:object="${group}"
					th:action="SaveGroup" method="Post">
					<div class="box-body">

						<input type="text" hidden="" th:field="*{isParent}" id="parent" />

						<div class="form-group">

							<label class="col-sm-2 control-label">Group Head </label>
							<div class="col-sm-10">

								<select class="form-control input-lg"
									th:onchange="'javascript:getSubType(this.value );'">
									<option value='999'>Please Select</option>
									<option th:each="parent : ${parentList}"
										th:value="${parent.Acc_ID}" th:text="${parent.accName}">Cash
														In hand</option>
								</select>
							</div>
						</div>

						<div class="form-group ">
							<div class="col-sm-2">
								<input type="checkbox" onchange="enable()" />
							</div>
						</div>
						<div class="form-group">

							<label class="col-sm-2 control-label">Sub Group</label>
							<div class="col-sm-10">

								<select class="form-control input-lg" id="childRef"
									disabled="disabled" onchange="getRefNo(this.value)">
									<option value='999'>Please Select</option>

								</select>
							</div>
						</div>

						<div class="form-group">
							<label class="col-sm-2 control-label">Account Name: </label>
							<div class="col-sm-10">
								<input class="form-control" type="text" th:field="*{accName}"
									placeholder="Account Name" />
							</div>
						</div>

						<div class="form-group">

							<label class="col-sm-2 control-label">Reference No. </label>
							<div class="col-sm-10">
								<input class="form-control" type="text" th:field="*{refNo}"
									disabled="disabled" id="RefNo" placeholder="Reference No. " />
							</div>
						</div>

						<div class="form-group">

							<label class="col-sm-2 control-label">Remarks:</label>
							<div class="col-sm-10">
								<textarea class="form-control" rows="4" cols="4"
									th:field="*{remarks}" placeholder="Enter Any details if needed"></textarea>
							</div>
						</div>

						<div class="box-body">
							<button class="btn btn-info pull-right" type="submit"
								Value="Submit">Submit Group</button>
						</div>
					</div>
				</form>
			</div>
		</div>

	</div>

	<div th:replace="template:: footer"></div>
</body>
</html>